@use 'tailwindcss/components';

// UI (Preact) Components
// ----------
@use './StyledText';

// TODO: Evaluate all classes below after components have been converted to
// Tailwind.
// - If retaining "here", put them in @layer components after `frontend-shared`
//  component styles have been converted to Tailwind (and are contained in the
// components layer themselves). They need to come after shared-component
// styles in the output stylesheet.
// - Some may need to be moved to another layer or elsewhere.

@layer components {
  // Style a background to contain a vertical dashed line, horizontally-
  // centered, that gets darker on hover.
  //
  // Linear gradient, sizing and positioning derived from
  // https://css-tricks.com/more-control-over-css-borders-with-background-image/
  .bg-thread-line {
    // Use TW gradient stops to color the line
    // These set --tw-gradient-from CSS properties
    @apply from-grey-3 hover:from-grey-4;
    @apply bg-no-repeat bg-center;

    background-image: repeating-linear-gradient(
      180deg,
      var(--tw-gradient-from),
      var(--tw-gradient-from) 4px,
      transparent 4px,
      transparent 6px,
      var(--tw-gradient-from) 6px
    );
    background-size: 1px 100%;
  }
}

// Applies to any text: strikeout effect
.p-redacted-text {
  @apply line-through grayscale contrast-50 text-color-text-light;
}

// Disable scroll anchoring as it interferes with `ThreadList` and
// `visible-threads` calculations and can cause a render loop
.js-thread-list-scroll-root {
  overflow-anchor: none;
}

:root {
  --subdued-color: hsl(200, 100%, 50%);
  --text-color: hsl(200, 100%, 20%);
  --avatar-size: 1.5rem;
  --grid-gap: 1rem;
  --group-header-spacing: 1rem;
}

.message-grid {
  display: grid;
  grid-template-columns: var(--avatar-size) 1fr;
  grid-auto-rows: auto;
  column-gap: 0.5rem;
  row-gap: var(--grid-gap);
  max-width: 750px;
  width: 100%;
  margin: 0 auto;
}

.timeline-node {
  position: relative;
}

.timeline-node > .timeline-circle {
  border-radius: 100%;
  // border: 2px solid #1d4ed8;
  display: block;
  width: var(--avatar-size);
  height: var(--avatar-size);
}

.timeline-node::after {
  content: "";
  position: absolute;
  background-color: #BFDBFF;
  width: 2px;
  left: 0;
  right: 0;
  margin: 0 auto;
  top: var(--avatar-size);
  bottom: calc(var(--grid-gap) * -1);
  // z-index: -1;
}

.timeline-node:nth-last-child(2)::after {
  display: none;
}

.timeline-hover-on {
  background-color: rgb(203 213 225);
  font-weight: 700;
}

.timeline-expanded {
  display: block;
}

.timeline-hidden {
  display: none;
}

// .timeline-content:hover ~ .timeline-node {
//   background-color: rgb(203 213 225);
// }

.collasipble-content {
  display: none;
}
